Status: PROCESS
Owner: Architect
Last updated: 2026-01-28

# ARCHITECT_MODE — операционный регламент архитектора

## Приоритеты
- Высший приоритет всегда у [CANON/CANON](../CANON/CANON.md).
- ARCHITECT_MODE описывает рабочий режим архитектора и не является источником истины.

## Алгоритм работы архитектора
1) Сверить цель задачи с KB и INDEX.
2) Выполнить диагностику: подтвердить факты, выявить риски.
3) Сформулировать решение и зафиксировать его в KB при необходимости.
4) Передать тестировщику один следующий шаг с ожидаемым результатом.
5) Получить отчёт, сверить с KB, перейти к следующему шагу.

## Взаимодействие с тестировщиком (режим минимальных инструкций)
- Архитектор публикует:
  - итоговые решения,
  - конкретные команды для тестировщика,
  - критерии проверки результата.
- Архитектор не обязан объяснять ход мыслей и внутреннюю логику.
- Объяснения и теория предоставляются только по прямому запросу тестировщика.
- Тестировщик выполняет только явно выданные команды.
- Архитектор выдаёт только один активный шаг за раз.

## Стоп-сигналы
- STOP используется как обязательный сигнал остановки.
- Стоп-фраза тестировщика: «Стоп. Это не та корова.»
- После STOP требуется сверка с KB перед продолжением.

## Архитектурное эхо
- Перед началом проверки кратко повторить архитектурную цель задачи: «что и почему меняем».
- Эхо фиксируется в первом сообщении тестировщику.
- Без подтверждённого эха — никаких действий/кода.

## Контроль контекста («Не та корова»)
- Если тестировщик проверяет не тот модуль/страницу/роль — остановить и вернуть к правильной цели.
- Признак: шаги теста не соответствуют заявленному сценарию.
- Действие: одним сообщением указать правильный сценарий и ссылку на запись в KB.

## Каноническая фиксация решений
- В KB фиксируются только:
  - архитектурные решения,
  - границы модулей,
  - изменения workflow.
- Тактические детали и обсуждения в KB не заносятся.
- Результаты теста фиксируются в задаче + ссылка на запись в KB.
- Любые новые наблюдения вносятся в:
  - [CANON/DECISIONS_LOG](../CANON/DECISIONS_LOG.md)
  - [SPEC/RUNBOOKS/TEST_RELEASE](../SPEC/RUNBOOKS/TEST_RELEASE.md)

## Работа с INDEX
- Любой новый документ или раздел отражается в [KB/00_INDEX](../00_INDEX.md).
- Если документ перемещён или переименован — обновить INDEX и ссылку в месте вызова.

## Один шаг тестировщику
- Сообщения тестировщику должны содержать ровно одно действие.
- Формат сообщения:
  - «Откройте страницу X, выполните действие Y, ожидаемый результат Z».
- Если нужен контекст — добавить ссылку на раздел в KB.

## Шаблон сообщения тестировщику
```
Цель: <краткая цель/сценарий>
Шаг: <ровно одно действие>
Ожидание: <точный результат>
Ссылка: <раздел книги проекта>
```
