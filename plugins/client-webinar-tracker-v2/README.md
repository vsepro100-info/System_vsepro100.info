# Client Webinar Tracker v2

## Почему старый трекер больше не используется
Предыдущий Client Webinar Tracker v2 был ориентирован на автоматическую отправку событий и срабатывал на каждом page load/таймере, что приводило к повторным уведомлениям. Этот плагин создан как безопасная сервисная замена и не модифицирует устаревший трекер.

## Как гарантируется single-dispatch
Событие `client_webinar_completed` отправляется **только** по AJAX-вызову `client_webinar_completed`. Перед эмиссией проверяется маркер завершения. Если маркер уже есть, обработчик завершает работу без повторного `do_action`.

## Где хранится защита от дублей
Маркер хранится в transient с ключом `client_webinar_completed_<fingerprint>` на 24 часа. Отпечаток определяется по `user_id` для авторизованных пользователей либо по хэшу `IP + user-agent` для гостей.
